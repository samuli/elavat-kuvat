(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2743:function(e,t,n){"use strict";var a=n(7146),r=n(5969);t.Z=function(){return(0,a.BX)("div",{className:"mt-2",children:[(0,a.tZ)("h1",{children:"Kr\xf6h\xf6m.... jokin meni vikaan. "}),(0,a.BX)("p",{children:["Kokeile ladata sivu uudelleen tai ",(0,a.tZ)(r.Z,{href:"/",children:(0,a.tZ)("a",{className:"underline",children:"palaa etusivulle"})})]})]})}},3419:function(e,t,n){"use strict";n.d(t,{E:function(){return o},O:function(){return u}});var a=n(7146),r=n(6010),c=n(5796),i=n(5969),o=function(e){var t=e.src,n=e.width,r=void 0===n?300:n,c=(e.height,e.style),i=void 0===c?{}:c;return(0,a.tZ)("img",{src:"https://api.finna.fi".concat(t,"&w=").concat(r),className:"w-auto rouded-xl overflow-hidden",alt:"Esikatselukuva",style:i})},l=function(e,t){return e?(0,a.tZ)(c.ZP,{offset:100,once:!0,children:t}):t},u=function(e){var t=e.records,n=e.lazy,c=void 0===n||n;return(0,a.tZ)("div",{children:(0,a.tZ)("ul",{className:"flex flex-row flex-wrap justify-between. overflow-hidden.",children:null===t||void 0===t?void 0:t.map((function(e,t){return(0,a.tZ)("li",{role:"button",className:(0,r.Z)("px-1 mb-3 w-1/2 sm:w-1/3 md:w-1/4 h-full flex flex-col group",(null===e||void 0===e?void 0:e.id)&&"cursor-pointer"),children:(n=(null===e||void 0===e?void 0:e.id)||null,o=(0,a.BX)("div",{className:"flex flex-col",children:[(0,a.tZ)("div",{className:"overflow-hidden aspect-w-5 aspect-h-4",children:(null===e||void 0===e?void 0:e.images.length)>0&&l(c&&t>=8,(0,a.tZ)("img",{className:"object-cover object-center",src:"https://api.finna.fi".concat(e.images[0],"&w=300"),alt:"Esikatselukuva"}))}),(0,a.tZ)("div",{className:"w-full bg-gray-900 pt-2 px-3 text-center text-gray-200 overflow-hidden text-sm md:text-md line-clamp-2 h-10 group-hover:text-white leading-tight",children:(null===e||void 0===e?void 0:e.title)||""})]}),n?(0,a.tZ)(i.Z,{href:"/view?id=".concat(encodeURIComponent(n)),children:(0,a.tZ)("a",{children:o})},n):o)},"record-".concat(t));var n,o}))})})}},5969:function(e,t,n){"use strict";var a=n(6156),r=n(7146),c=n(1664);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){return(0,r.tZ)(c.default,o(o({},e),{},{prefetch:!1}))}},7406:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var a=n(7146),r=(n(9748),n(6010)),c=n(5969),i=function(e){var t=e.facet,n=e.facets,i=e.facetUrl,o=e.truncate,l=void 0!==o&&o;return(0,a.tZ)("div",{className:(0,r.Z)("mt-1 items-center w-full",l&&"line-clamp-3 overflow-clip"),children:(0,a.tZ)("ul",{className:"",children:n.map((function(e){return(0,a.tZ)(c.Z,{prefetch:!0,href:i(t,e.value),children:(0,a.tZ)("a",{children:(0,a.tZ)("li",{role:"button",className:"inline-flex flex-auto mr-2 mb-1 px-2 py-1 bg-gradient-to-b from-gray-100 to-gray-200 rounded-md text-xs font-medium subpixel-antialiased text-gray-800 uppercase. cursor-pointer ripple-bg-white whitespace-nowrap",children:e.translated},"facet-".concat(e.value))})},"facet-map-".concat(e.value))}))})})}},4807:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var a=n(7146),r=n(6010),c=function(e){var t=e.title,n=e.value,c=e.resultCount,i=(e.pageNum,e.pageCount,e.placeholder);return t=void 0!==i&&i?n="":"".concat(t,":"),(0,a.BX)("div",{className:"flex items-baseline justify-between h-8",children:[(0,a.BX)("h2",{className:(0,r.Z)("leading-tight",t&&"mr-2"),children:[t," ",(0,a.tZ)("span",{className:"font-normal text-gray-200",children:n})]}),c&&(0,a.tZ)("div",{children:(0,a.BX)("div",{className:"mr-2 text-sm text-gray-200 leading-tight",children:["(",c,(0,a.tZ)("span",{className:"sm:inline hidden",children:" elokuvaa"}),")"]})})]})}},883:function(e,t,n){"use strict";n.d(t,{rr:function(){return l},Yw:function(){return m},J0:function(){return o},zp:function(){return u},jY:function(){return f},Gg:function(){return d},yQ:function(){return r}});var a=n(267).sk?"http://localhost:3001":"https://api.finna.fi",r=20,c=function(e,t){return"filter[]=".concat("".concat(e,':"').concat(encodeURIComponent(t),'"'))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=["free_online_boolean:1","datasource_str_mv:kavi","~format_ext_str_mv:1/Video/Video/","~format_ext_str_mv:1/Video/Short/","-id:kavi.elonet_elokuva_1611548","-genre_facet:katsaus"];return"undefined"!==typeof e&&!1!==e&&(e=e||[1900,"*"],t.push('search_daterange_mv:"['.concat(e[0]," TO ").concat(e[1],']"'))),t.map((function(e){return"filter[]=".concat(encodeURIComponent(e))})).join("&")},o=function(e,t){var n=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(i(),"&").concat(n,"&limit=").concat(t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:["title","id","images"],s=i(o)+(n?'&filter[]=topic_facet:"'.concat(encodeURIComponent(n),'"'):"")+(c?'&filter[]=genre_facet:"'.concat(encodeURIComponent(c),'"'):""),d=u.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(s,"&").concat(d,"&limit=").concat(l,"&page=").concat(t)},u=function(){var e=[["genre_facet","mainos"],["genre_facet","animaatio"],["genre_facet","tv-tuotanto"],["genre_facet","opetuselokuva"],["genre_facet","henkil\xf6dokumentti"],["genre_facet","ammatinkuvaus"],["genre_facet","draamadokumentti"],["genre_facet","teollisuusdokumentti"],["topic_facet","henkil\xf6autot"],["topic_facet","tehtaat"],["topic_facet","matkailu"],["topic_facet","pankit"],["topic_facet","maisema"],["topic_facet","muoti"],["topic_facet","kahvi"],["topic_facet","kaupungit"],["topic_facet","virvoitusjuomat"],["topic_facet","hygienia"],["topic_facet","elintarvikkeet"],["topic_facet","ruoanvalmistus"],["topic_facet","maatalous"],["topic_facet","myym\xe4l\xe4t"],["topic_facet","rakennukset"],["search_daterange_mv","[1950 TO 1959]"],["search_daterange_mv","[1960 TO 1969]"],["search_daterange_mv","[1970 TO 1979]"],["search_daterange_mv","[1980 TO 2000]"]],t=e[Math.floor(Math.random()*e.length)],n=i(!1)+"&"+c(t[0],t[1]),r=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?").concat(n,"&").concat(r,"&limit=20&sort=first_indexed desc,id asc}")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=i(r)+(t?"&".concat(c("topic_facet",t)):"")+(n?"&".concat(c("genre_facet",n)):""),u="facet[]=".concat(e);return"".concat(a,"/api/v1/search?lookfor=").concat(o?encodeURIComponent(o):"","&").concat(l,"&").concat(u,"&limit=0")},d=function(e,t,n,a){return s("topic_facet",t,n,a,e)},f=s("genre_facet"),v=(s("main_date_str"),["title","id","images","urls","recordPage","imageRights","rawData","buildings"]),m=function(e){var t=v.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/record?id=").concat(e,"&").concat(t)}},1189:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var a=n(7146),r=n(2962),c=n(6010),i=n(8767),o=n(9748),l=n(5796),u=n(6206),s=n(4807),d=n(2743),f=(n(3125),n(1163)),v=(n(1664),n(1871)),m=n(883),p=n(3419),h=n(7406),g=n(267),y=function(e){var t=e.items,n=e.activePage,r=void 0===n?1:n,i=e.onPageSelect,o=e.small,l=void 0!==o&&o;return(0,a.tZ)("select",{"aria-label":"Siirry sivulle",onChange:function(e){return i(e.target.value)},value:r,className:(0,c.Z)("-appearance-none outline-none w-auto border bg-gray-100 border-gray-400 rounded-md text-gray-900 cursor-pointer",!l&&"mx-3 px-3 py-2 text-md",l&&"mx-1 px-1 py-1 text-xs"),children:t.map((function(e,t){var n=r===e;return(0,a.BX)("option",{disabled:n,value:e,children:["Sivu ",e]},t)}))})},_=function(e){var t=e.children,n=e.onClick,r=e.disabled,i=e.small,o=void 0!==i&&i;return(0,a.tZ)("div",{className:(0,c.Z)("flex justify-center items-center rounded-full border-gray-400",o&&"text-xl",!o&&"text-4xl",r&&" text-gray-500",!r&&"cursor-pointer active:text-pink-500 text-gray-100"),onClick:function(){r||n()},children:t})},x=function(e){var t=e.results,n=e.page,r=e.pageCount,c=e.setPage,i=(e.loading,e.showResultCount),o=e.small,l=void 0!==o&&o,u=Array.from(Array(r),(function(e,t){return t+1})),s=r>1;return(0,a.BX)("div",{className:"flex items-start items-center",children:[s&&(0,a.tZ)(_,{disabled:1===n,onClick:function(){return c(n-1)},small:l,children:(0,a.tZ)(v.x_l,{})}),(0,a.tZ)(y,{activePage:n,items:u,onPageSelect:function(e){return c(e)},small:l}),s&&(0,a.tZ)(_,{disabled:n===r,onClick:function(){return c(n+1)},small:l,children:(0,a.tZ)(v.Z1Y,{})}),i&&(0,a.BX)("div",{className:"ml-5 text-xl text-gray-200",children:["(",t," elokuvaa)"]})]})},Z=function(e){return Math.ceil(Number(e)/m.yQ)};function b(e){var t,n,c,v,y,_=e.topicFacet,b=void 0===_?null:_,k=e.initialTopicFacets,w=void 0===k?null:k,N=e.genreFacet,C=void 0===N?null:N,O=e.daterange,j=void 0===O?null:O,P=e.records,R=void 0===P?null:P,S=e.initialPage,B=void 0===S?null:S,E=e.queryKey,X=void 0===E?null:E,U=e.queryValue,I=void 0===U?null:U,q=e.pageTitle,T=(0,f.useRouter)(),D=(0,u.lP)().updateScroll,K=(0,o.useState)(null),Q=(K[0],K[1]),A=(0,o.useState)(null),F=A[0],M=A[1],V=(0,o.useState)(null),Y=V[0],G=V[1],z=(0,o.useState)(null),H=z[0],J=z[1],L=(0,o.useState)(!1),W=L[0],$=L[1],ee=(0,o.useState)(!1),te=ee[0],ne=ee[1],ae=(0,o.useState)(R?R.resultCount:null),re=ae[0],ce=ae[1],ie=(0,o.useState)(R?Z(R.resultCount):null),oe=ie[0],le=ie[1],ue=(0,o.useRef)();if(!g.sk&&!T.isReady)return"";var se="undefined"!==typeof T.query.page?Number(T.query.page):B||1;J(se);var de=T.query.lookfor;Q(de),M(de),G(de);var fe=(j=j||(null===(t=T.query)||void 0===t?void 0:t.date))&&j.split("-")||null;b=b||(null===(n=T.query)||void 0===n?void 0:n.topic),C=C||(null===(c=T.query)||void 0===c?void 0:c.genre);var ve=(0,i.useQuery)((0,m.rr)(de||"",se,b,C,fe),{enabled:null===R,onError:function(e){ne(!1),M(Y)},onSuccess:function(e){ne(!1),M(Y),ce(e.resultCount||0),le(Z(e.resultCount)),W&&(window.scrollTo(0,0),$(!1)),ue.current&&clearTimeout(ue.current),ue.current=setTimeout((function(){return(0,l.be)()}),100)},keepPreviousData:!0,initialData:R}),me=ve.data,pe=(ve.status,ve.error),he=ve.isFetching;null!==R&&(me=R),(0,o.useEffect)((function(){return ne(he)}),[he]),(0,g.SE)(he);var ge=(0,i.useQuery)((0,m.Gg)(de||"",b,C,fe),{enabled:"undefined"!==typeof H,initialData:w,refetchOnMount:null===w}).data;(0,o.useEffect)((function(){D()}),[]);var ye=function(e){var t=null;return X&&I?t="/search?".concat(X,"=").concat(encodeURIComponent(I),"&page=").concat(e):b?t="/search?topic=".concat(encodeURIComponent(b),"&page=").concat(e):C?t="/search?genre=".concat(encodeURIComponent(C),"&page=").concat(e):j&&(t="/search?date=".concat(encodeURIComponent(j),"&page=").concat(e)),t},_e=function(e){ne(!1),$(!0);ye(e);T.query.page=e,T.push(T)};(0,o.useEffect)((function(){!he&&H+1>1&&H<oe-1&&T.prefetch(ye(H+1))}),[H,he]),(0,o.useEffect)((function(){return J(Number(T.query.page))}),[T.query.page]);var xe=w||ge,Ze=b||C,be="clips"===X,ke=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return oe>1&&(0,a.tZ)("div",{className:"",children:(0,a.tZ)(x,{results:re,page:H,pageCount:oe,setPage:function(e){return _e(e)},loading:te,showResultCount:t,limit:m.yQ,small:e})})},we=function(e,t,n){return 0===re?"":(0,a.BX)("div",{className:"flex items-center justify-between",children:[(0,a.tZ)(s.d,{title:e,value:t,placeholder:n,resultCount:re}),ke(!0,!1)]})};return(0,a.BX)(a.HY,{children:[(0,a.tZ)(r.PB,{title:q||(0,g.CE)(F,b,C,j,se),noindex:0===T.asPath.indexOf("/search"),nofollow:!0}),(0,a.BX)("div",{className:"w-full font-sans",children:[(0,a.tZ)("div",{className:"pt-2 w-full",children:(0,a.BX)("div",{className:"flex flex-col flex-wrap md:flex-nowrap",children:[b&&we("Aihe",b),C&&we("Genre",C),j&&we("Aikakausi",(0,g.cm)(fe[0])),be&&we("Selaa elokuvia"),!Ze&&!be&&!j&&(0,a.tZ)("div",{className:"",children:we("Haku",F,!F)}),(he||re>0)&&(0,a.tZ)("div",{className:"h-16 min-h-32 w-full mt-1 mb-3",children:"OK"===(null===xe||void 0===xe?void 0:xe.status)&&re>0&&(0,a.tZ)(h.N,{facet:"topic_facet",facets:xe.facets.topic_facet.filter((function(e){return e.value!==b})),facetUrl:g.lI,truncate:!0})})]})}),(0,a.BX)("div",{className:"mt-6",children:[!he&&(pe||me&&"ERROR"===(null===(v=me)||void 0===v?void 0:v.status))&&(0,a.tZ)(d.Z,{}),!he&&me&&0===Number(re)&&(0,a.BX)("h1",{children:["Ei tuloksia haulla ",(0,a.tZ)("span",{className:"font-normal",children:de})]}),"OK"===(null===(y=me)||void 0===y?void 0:y.status)&&(0,a.tZ)(p.O,{records:me.records})]}),(0,a.tZ)("div",{className:"flex justify-center",children:!he&&ke(!1,!1)})]})]})}}}]);