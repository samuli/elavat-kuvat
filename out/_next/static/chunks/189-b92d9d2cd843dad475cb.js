"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2743:function(e,t,n){var a=n(8169),r=n(5969);t.Z=function(){return(0,a.BX)("div",{className:"mt-2",children:[(0,a.tZ)("h1",{children:"Kr\xf6h\xf6m.... jokin meni vikaan. "}),(0,a.BX)("p",{children:["Kokeile ladata sivu uudelleen tai ",(0,a.tZ)(r.Z,{href:"/",children:(0,a.tZ)("a",{className:"underline",children:"palaa etusivulle"})})]})]})}},3419:function(e,t,n){n.d(t,{E:function(){return o},O:function(){return l}});var a=n(8169),r=(n(9748),n(6010)),c=n(617),i=n(5969),o=function(e){var t=e.src,n=e.width,r=void 0===n?300:n,c=(e.height,e.style),i=void 0===c?{}:c;return(0,a.tZ)("img",{src:"https://api.finna.fi".concat(t,"&w=").concat(r),className:"w-auto rouded-xl overflow-hidden",alt:"Esikatselukuva",style:i})},l=function(e){var t=e.records;e.lazy;return(0,a.tZ)("div",{children:(0,a.tZ)("ul",{className:"flex flex-row flex-wrap overflow-hidden.",children:null===t||void 0===t?void 0:t.map((function(e,t){return(0,a.tZ)("li",{className:(0,r.Z)("px-1 mt-2 w-1/2 sm:w-1/3 md:w-1/4 h-full flex flex-col group",(null===e||void 0===e?void 0:e.id)&&"cursor-pointer"),children:(n=(null===e||void 0===e?void 0:e.id)||null,o=(0,a.BX)("div",{className:"flex flex-col rounded-sm",style:{backgroundColor:"rgb(21, 30, 50)"},children:[(0,a.tZ)("div",{className:"overflow-hidden aspect-w-5 aspect-h-4",children:(null===e||void 0===e?void 0:e.images.length)>0&&(0,a.tZ)(c.U,{duration:300,offset:100,render:function(t){return(0,a.tZ)("img",{className:"object-none object-center",src:"https://api.finna.fi".concat(e.images[0],"&w=300"),alt:"Esikatselukuva",onLoad:t})}})}),(0,a.tZ)("div",{className:"w-full py-2 px-3 text-center text-gray-200 truncate text-xs overflow-ellipsis group-hover:text-white",children:(null===e||void 0===e?void 0:e.title)||""})]}),n?(0,a.tZ)(i.Z,{href:"/view?id=".concat(encodeURIComponent(n)),children:(0,a.tZ)("a",{children:o})},n):o)},"record-".concat(t));var n,o}))})})}},5969:function(e,t,n){var a=n(2809),r=n(8169),c=n(1664);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){return(0,r.tZ)(c.default,o(o({},e),{},{prefetch:!1}))}},7406:function(e,t,n){n.d(t,{N:function(){return i}});var a=n(8169),r=(n(9748),n(6010)),c=n(5969),i=function(e){var t=e.facet,n=e.facets,i=e.facetUrl,o=e.truncate,l=void 0!==o&&o;return(0,a.tZ)("div",{className:(0,r.Z)("mt-1 items-center w-full",l&&"line-clamp-3 overflow-clip"),children:(0,a.tZ)("ul",{children:n.map((function(e){return(0,a.tZ)(c.Z,{prefetch:!0,href:i(t,e.value),children:(0,a.tZ)("a",{children:(0,a.tZ)("li",{className:"inline-flex flex-auto mr-2 mb-1 px-2 py-1 bg-gradient-to-b from-gray-100 to-gray-200 rounded-md text-xs font-medium subpixel-antialiased text-gray-800 uppercase. cursor-pointer ripple-bg-white whitespace-nowrap",children:e.translated},"facet-".concat(e.value))})},"facet-map-".concat(e.value))}))})})}},4807:function(e,t,n){n.d(t,{d:function(){return c}});var a=n(8169),r=n(6010),c=function(e){var t=e.title,n=e.value,c=e.resultCount,i=(e.pageNum,e.pageCount,e.placeholder);return t=void 0!==i&&i?n="":"".concat(t,":"),(0,a.BX)("div",{className:"flex items-center justify-between h-8",children:[(0,a.BX)("h1",{className:(0,r.Z)("unstyled leading-tight",t&&"mr-2"),children:[t," ",(0,a.tZ)("span",{className:"font-normal text-gray-200",children:n})]}),c&&(0,a.tZ)("div",{children:(0,a.BX)("div",{className:"mr-2 text-sm text-gray-200 leading-tight",children:["(",c,(0,a.tZ)("span",{className:"sm:inline hidden",children:" elokuvaa"}),")"]})})]})}},883:function(e,t,n){n.d(t,{rr:function(){return l},Yw:function(){return m},J0:function(){return o},zp:function(){return u},jY:function(){return f},Gg:function(){return d},yQ:function(){return r}});var a=(n(3174).sk,"https://api.finna.fi"),r=20,c=function(e,t){return"filter[]=".concat("".concat(e,':"').concat(encodeURIComponent(t),'"'))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=["free_online_boolean:1","datasource_str_mv:kavi","~format_ext_str_mv:1/Video/Video/","~format_ext_str_mv:1/Video/Short/","-id:kavi.elonet_elokuva_1611548","-genre_facet:katsaus"];return"undefined"!==typeof e&&!1!==e&&(e=e||[1900,"*"],t.push('search_daterange_mv:"['.concat(e[0]," TO ").concat(e[1],']"'))),t.map((function(e){return"filter[]=".concat(encodeURIComponent(e))})).join("&")},o=function(e,t){var n=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(i(),"&").concat(n,"&limit=").concat(t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:["title","id","images"],s=i(o)+(n?'&filter[]=topic_facet:"'.concat(encodeURIComponent(n),'"'):"")+(c?'&filter[]=genre_facet:"'.concat(encodeURIComponent(c),'"'):""),d=u.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(s,"&").concat(d,"&limit=").concat(l,"&page=").concat(t)},u=function(){var e=[["genre_facet","mainos"],["genre_facet","animaatio"],["genre_facet","tv-tuotanto"],["genre_facet","opetuselokuva"],["genre_facet","henkil\xf6dokumentti"],["genre_facet","ammatinkuvaus"],["genre_facet","draamadokumentti"],["genre_facet","teollisuusdokumentti"],["topic_facet","henkil\xf6autot"],["topic_facet","tehtaat"],["topic_facet","matkailu"],["topic_facet","pankit"],["topic_facet","maisema"],["topic_facet","muoti"],["topic_facet","kahvi"],["topic_facet","kaupungit"],["topic_facet","virvoitusjuomat"],["topic_facet","hygienia"],["topic_facet","elintarvikkeet"],["topic_facet","ruoanvalmistus"],["topic_facet","maatalous"],["topic_facet","myym\xe4l\xe4t"],["topic_facet","rakennukset"],["search_daterange_mv","[1950 TO 1959]"],["search_daterange_mv","[1960 TO 1969]"],["search_daterange_mv","[1970 TO 1979]"],["search_daterange_mv","[1980 TO 2000]"]],t=e[Math.floor(Math.random()*e.length)],n=i(!1)+"&"+c(t[0],t[1]),r=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?").concat(n,"&").concat(r,"&limit=20&sort=first_indexed desc,id asc}")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=i(r)+(t?"&".concat(c("topic_facet",t)):"")+(n?"&".concat(c("genre_facet",n)):""),u="facet[]=".concat(e);return"".concat(a,"/api/v1/search?lookfor=").concat(o?encodeURIComponent(o):"","&").concat(l,"&").concat(u,"&limit=0")},d=function(e,t,n,a){return s("topic_facet",t,n,a,e)},f=s("genre_facet"),v=(s("main_date_str"),["title","id","images","urls","recordPage","imageRights","rawData","buildings"]),m=function(e){var t=v.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/record?id=").concat(e,"&").concat(t)}},1189:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var a=n(8169),r=n(2962),c=n(6010),i=n(8767),o=n(9748),l=n(6206),u=n(4807),s=n(2743),d=(n(3125),n(1163)),f=(n(1664),n(1871)),v=n(883),m=n(3419),p=n(7406),h=n(3174),g=function(e){var t=e.items,n=e.activePage,r=void 0===n?1:n,i=e.onPageSelect,o=e.small,l=void 0!==o&&o;return(0,a.tZ)("select",{"aria-label":"Siirry sivulle",onChange:function(e){return i(e.target.value)},value:r,className:(0,c.Z)("-appearance-none outline-none w-auto border bg-gray-100 border-gray-400 rounded-md text-gray-900 cursor-pointer",!l&&"mx-3 px-3 py-2 text-md",l&&"mx-1 px-1 py-1 text-xs"),children:t.map((function(e,t){var n=r===e;return(0,a.BX)("option",{disabled:n,value:e,children:["Sivu ",e]},t)}))})},y=function(e){var t=e.children,n=e.onClick,r=e.disabled,i=e.small,o=void 0!==i&&i;return(0,a.tZ)("div",{className:(0,c.Z)("flex justify-center items-center rounded-full border-gray-400",o&&"text-xl",!o&&"text-4xl",r&&" text-gray-500",!r&&"cursor-pointer active:text-pink-500 text-gray-100"),onClick:function(){r||n()},children:t})},_=function(e){var t=e.results,n=e.page,r=e.pageCount,c=e.setPage,i=(e.loading,e.showResultCount),o=e.small,l=void 0!==o&&o,u=Array.from(Array(r),(function(e,t){return t+1})),s=r>1,d=1===n,v=n===r;return(0,a.BX)("nav",{className:"flex items-start items-center","aria-label":"Hakutuloksen sivutus".concat(l?"":", sivun lopussa"),children:[s&&(0,a.tZ)(y,{disabled:d,"aria-disabled":d,onClick:function(){return c(n-1)},small:l,children:(0,a.tZ)(f.x_l,{})}),(0,a.tZ)(g,{activePage:n,items:u,onPageSelect:function(e){return c(e)},small:l}),s&&(0,a.tZ)(y,{disabled:v,"aria-disabled":v,onClick:function(){return c(n+1)},small:l,children:(0,a.tZ)(f.Z1Y,{})}),i&&(0,a.BX)("div",{className:"ml-5 text-xl text-gray-200",children:["(",t," elokuvaa)"]})]})},x=function(e){return Math.ceil(Number(e)/v.yQ)};function Z(e){var t,n,c,f,g,y=e.topicFacet,Z=void 0===y?null:y,k=e.initialTopicFacets,b=void 0===k?null:k,w=e.genreFacet,N=void 0===w?null:w,C=e.daterange,O=void 0===C?null:C,j=e.records,P=void 0===j?null:j,R=e.initialPage,S=void 0===R?null:R,B=e.queryKey,E=void 0===B?null:B,U=e.queryValue,X=void 0===U?null:U,I=e.pageTitle,q=(0,d.useRouter)(),T=(0,l.lP)().updateScroll,D=(0,o.useState)(null),G=(D[0],D[1]),K=(0,o.useState)(null),Q=K[0],A=K[1],F=(0,o.useState)(null),M=F[0],V=F[1],Y=(0,o.useState)(null),H=Y[0],z=Y[1],J=(0,o.useState)(!1),L=J[0],W=J[1],$=(0,o.useState)(P?P.resultCount:null),ee=$[0],te=$[1],ne=(0,o.useState)(P?x(P.resultCount):null),ae=ne[0],re=ne[1];if(!h.sk&&!q.isReady)return"";var ce="undefined"!==typeof q.query.page?Number(q.query.page):S||1;z(ce);var ie=q.query.lookfor;G(ie),A(ie),V(ie);var oe=(O=O||(null===(t=q.query)||void 0===t?void 0:t.date))&&O.split("-")||null;Z=Z||(null===(n=q.query)||void 0===n?void 0:n.topic),N=N||(null===(c=q.query)||void 0===c?void 0:c.genre);var le=(0,i.useQuery)((0,v.rr)(ie||"",ce,Z,N,oe),{enabled:null===P,onError:function(e){W(!1),A(M)},onSuccess:function(e){W(!1),A(M),te(e.resultCount||0),re(x(e.resultCount))},initialData:P}),ue=le.data,se=(le.status,le.error),de=le.isFetching;null!==P&&(ue=P),(0,o.useEffect)((function(){return W(de)}),[de]),(0,h.SE)(de);var fe=(0,i.useQuery)((0,v.Gg)(ie||"",Z,N,oe),{enabled:"undefined"!==typeof H,initialData:b,refetchOnMount:null===b}).data;(0,o.useEffect)((function(){T()}),[]);var ve=function(e){var t=null;return E&&X?t="/search?".concat(E,"=").concat(encodeURIComponent(X),"&page=").concat(e):Z?t="/search?topic=".concat(encodeURIComponent(Z),"&page=").concat(e):N?t="/search?genre=".concat(encodeURIComponent(N),"&page=").concat(e):O&&(t="/search?date=".concat(encodeURIComponent(O),"&page=").concat(e)),t},me=function(e){W(!1),window.scrollTo({top:0,behavior:"smooth"});ve(e);q.query.page=e,q.push(q)};(0,o.useEffect)((function(){!de&&H+1>1&&H<ae-1&&q.prefetch(ve(H+1))}),[H,de]),(0,o.useEffect)((function(){return z(Number(q.query.page))}),[q.query.page]);var pe=b||fe,he=Z||N,ge="clips"===E,ye=I||(0,h.CE)(Q,Z,N,O,ce),_e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ae>1&&(0,a.tZ)("div",{className:"",children:(0,a.tZ)(_,{results:ee,page:H,pageCount:ae,setPage:function(e){return me(e)},loading:L,showResultCount:t,limit:v.yQ,small:e})})},xe=function(e,t,n){return 0===ee?"":(0,a.BX)("div",{className:"flex items-center justify-between",children:[(0,a.tZ)(u.d,{title:e,value:t,placeholder:n,resultCount:ee}),_e(!0,!1)]})};return(0,a.BX)(a.HY,{children:[(0,a.tZ)(r.PB,{title:ye,noindex:0===q.asPath.indexOf("/search"),nofollow:!0,openGraph:{title:ye,url:"".concat(h.Gd).concat(q.asPath)}}),(0,a.BX)("div",{className:"w-full font-sans",children:[(0,a.tZ)("div",{className:"pt-2 w-full",children:(0,a.BX)("div",{className:"flex flex-col flex-wrap md:flex-nowrap",children:[Z&&xe("Aihe",Z),N&&xe("Genre",N),O&&xe("Aikakausi",(0,h.cm)(oe[0])),ge&&xe("Selaa elokuvia"),!he&&!ge&&!O&&(0,a.tZ)("div",{className:"",children:xe("Haku",Q,!Q)}),(de||ee>0)&&(0,a.tZ)("div",{className:"h-16 min-h-32 w-full mt-1 mb-3",children:"OK"===(null===pe||void 0===pe?void 0:pe.status)&&ee>0&&(0,a.tZ)(p.N,{facet:"topic_facet",facets:pe.facets.topic_facet.filter((function(e){return e.value!==Z})),facetUrl:h.lI,truncate:!0})})]})}),(0,a.BX)("div",{className:"mt-6",children:[!de&&(se||ue&&"ERROR"===(null===(f=ue)||void 0===f?void 0:f.status))&&(0,a.tZ)(s.Z,{}),!de&&ue&&0===Number(ee)&&(0,a.BX)("h1",{children:["Ei tuloksia haulla ",(0,a.tZ)("span",{className:"font-normal",children:ie})]}),"OK"===(null===(g=ue)||void 0===g?void 0:g.status)&&(0,a.tZ)(m.O,{records:ue.records})]}),(0,a.tZ)("div",{className:"flex justify-center mt-6",children:!de&&_e(!1,!1)})]})]})}}}]);