(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{1832:function(e,t,n){"use strict";var r=n(9485),c=n(6359);t.Z=function(){return(0,r.BX)("div",{className:"mt-2",children:[(0,r.tZ)("h1",{children:"Kr\xf6h\xf6m.... jokin meni vikaan. "}),(0,r.BX)("p",{children:["Kokeile ladata sivu uudelleen tai"," ",(0,r.tZ)(c.Z,{href:"/",children:(0,r.tZ)("a",{className:"underline",children:"palaa etusivulle"})})]})]})}},6359:function(e,t,n){"use strict";var r=n(2809),c=n(9485),a=n(1664);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){return(0,c.tZ)(a.default,o(o({},e),{},{prefetch:!1,children:e.children}))}},7074:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(9485),c=n(6010),a=n(6359),i=function(e){var t=e.facet,n=e.facets,i=e.facetUrl,o=e.truncate,l=void 0!==o&&o;return(0,r.tZ)("div",{className:(0,c.Z)("mt-1 items-center w-full",l&&"line-clamp-3 overflow-clip"),children:(0,r.tZ)("ul",{children:n.map((function(e){return(0,r.tZ)(a.Z,{prefetch:!0,href:i(t,e),children:(0,r.tZ)("a",{children:(0,r.tZ)("li",{className:"inline-flex flex-auto mr-2 mb-1 px-2 py-1 bg-gradient-to-b from-gray-100 to-gray-200 rounded-md text-xs font-medium subpixel-antialiased text-gray-800 uppercase. cursor-pointer ripple-bg-white whitespace-nowrap",children:e},"facet-".concat(e))})},"facet-".concat(e))}))})})}},1604:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(9485),c=n(6010),a=function(e){var t=e.title,n=e.value,a=e.resultCount;return t=e.placeholder?n="":"".concat(t,":"),(0,r.BX)("div",{className:"flex items-center justify-between h-8",children:[(0,r.BX)("h1",{className:(0,c.Z)("unstyled leading-tight",t&&"mr-2"),children:[t," ",(0,r.tZ)("span",{className:"font-normal text-gray-200",children:n})]}),a&&(0,r.tZ)("div",{children:(0,r.BX)("div",{className:"mr-2 text-sm text-gray-200 leading-tight",children:["(",a,(0,r.tZ)("span",{className:"sm:inline hidden",children:" elokuvaa"}),")"]})})]})}},3154:function(e,t,n){"use strict";n.d(t,{J0:function(){return o},zp:function(){return s},Yw:function(){return m},yQ:function(){return c},rr:function(){return l},Gg:function(){return d}});var r=n(4100).sk?"http://localhost:3001":"https://api.finna.fi",c=20,a=function(e,t){return"filter[]=".concat("".concat(e,':"').concat(encodeURIComponent(t),'"'))},i=function(e){e=e||[1900,"*"];var t=["free_online_boolean:1","datasource_str_mv:kavi","~format_ext_str_mv:1/Video/Video/","~format_ext_str_mv:1/Video/Short/","-id:kavi.elonet_elokuva_1611548","-genre_facet:katsaus"];return t.push('search_daterange_mv:"['.concat(e[0]," TO ").concat(e[1],']"')),t.map((function(e){return"filter[]=".concat(encodeURIComponent(e))})).join("&")},o=function(e,t){var n=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(r,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(i(),"&").concat(n,"&limit=").concat(t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:["title","id","images"],u=i(o)+(n?'&filter[]=topic_facet:"'.concat(encodeURIComponent(n),'"'):"")+(a?'&filter[]=genre_facet:"'.concat(encodeURIComponent(a),'"'):""),d=s.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(r,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(u,"&").concat(d,"&limit=").concat(l,"&page=").concat(t)},s=function(){var e=[["genre_facet","mainos"],["genre_facet","animaatio"],["genre_facet","tv-tuotanto"],["genre_facet","opetuselokuva"],["genre_facet","henkil\xf6dokumentti"],["genre_facet","ammatinkuvaus"],["genre_facet","draamadokumentti"],["genre_facet","teollisuusdokumentti"],["topic_facet","henkil\xf6autot"],["topic_facet","tehtaat"],["topic_facet","matkailu"],["topic_facet","pankit"],["topic_facet","maisema"],["topic_facet","muoti"],["topic_facet","kahvi"],["topic_facet","kaupungit"],["topic_facet","virvoitusjuomat"],["topic_facet","hygienia"],["topic_facet","elintarvikkeet"],["topic_facet","ruoanvalmistus"],["topic_facet","maatalous"],["topic_facet","myym\xe4l\xe4t"],["topic_facet","rakennukset"],["search_daterange_mv","[1950 TO 1959]"],["search_daterange_mv","[1960 TO 1969]"],["search_daterange_mv","[1970 TO 1979]"],["search_daterange_mv","[1980 TO 2000]"]],t=e[Math.floor(Math.random()*e.length)],n=i()+"&"+a(t[0],t[1]),c=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(r,"/api/v1/search?").concat(n,"&").concat(c,"&limit=20&sort=first_indexed desc,id asc}")},u=function(e,t,n,c,o){var l=i(c)+(t?"&".concat(a("topic_facet",t)):"")+(n?"&".concat(a("genre_facet",n)):""),s="facet[]=".concat(e);return"".concat(r,"/api/v1/search?lookfor=").concat(o?encodeURIComponent(o):"","&").concat(l,"&").concat(s,"&limit=0")},d=function(e,t,n,r){return u("topic_facet",t,n,r,e)},f=(u("genre_facet"),u("main_date_str"),["title","id","images","urls","recordPage","imageRights","rawData","buildings"]),m=function(e){var t=f.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(r,"/api/v1/record?id=").concat(e,"&").concat(t)}},9009:function(e,t,n){"use strict";n.d(t,{Yw:function(){return i},LP:function(){return o},rz:function(){return l},Xv:function(){return s}});var r=n(2809);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=function(e){return"/view?id=".concat(encodeURIComponent(e))},o=function(e){if("undefined"===typeof e.urls)return[];var t=[];return(e.urls||[]).forEach((function(e){(e.videoSources||[]).forEach((function(n){"application/x-mpegURL"===n.type&&t.push(a(a({},n),{},{title:e.text}))}))})),t},l=function(e,t){if(e.rawData)return e.rawData[t]||void 0},s=function(e){return"https://finna.fi".concat(e)}},6142:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(9485),c=n(1163),a=n(2962),i=n(9748),o=n(1871),l=n(617),s=n(5457),u=n.n(s),d=n(8767),f=n(1832),m=n(7074),p=n(1604),h=n(3154),v=n(9009),g=n(4100),x=function(e){var t,n,c=e.record,a=null===(t=c.imageRights)||void 0===t?void 0:t.copyright,i=null===(n=c.imageRights)||void 0===n?void 0:n.link,l=a;return a&&i&&(l=(0,r.tZ)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:l})),(0,r.BX)("div",{className:"flex flex-col",children:[(0,r.tZ)("span",{className:"uppercase text-xs font-bold",children:"Aineiston k\xe4ytt\xf6oikeudet: "}),(0,r.tZ)("a",{target:"_blank",rel:"noopener noreferrer",href:(0,v.Xv)(c.recordPage),className:"hover:text-gray-800",title:"Katso lis\xe4tiedot Finnassa",children:(0,r.BX)("div",{className:"text-sm flex flex-row items-center",children:[(0,r.tZ)("div",{className:"underline",children:l}),(0,r.tZ)("div",{className:"text-gray-600 ml-1 flex jusitfy-center items-center text-xl",children:(0,r.tZ)("span",{className:"text-xs ml-2 ",children:(0,r.tZ)(o.CkN,{})})})]})})]})},_=function(e){var t=e.record;return(0,r.BX)("div",{children:[(0,r.tZ)("h1",{className:"text-xl md:text-3xl font-bold",children:t.title}),(0,r.BX)("p",{className:"text-md text-gray-100",children:[(0,v.rz)(t,"author_corporate")," ".concat((0,v.rz)(t,"main_date_str"))]})]})},Z=function(e){var t=e.children;return(0,r.tZ)("div",{className:"flex items-center justify-center font-semibold text-lg px-4 py-3 rounded-xl bg-gradient-to-b from-pink-500 to-red-500 text-gray-100 border-2 border-red-500",children:t})},y=function(){return(0,r.tZ)(Z,{children:(0,r.BX)("div",{className:"ml-2 flex items-center uppercase text-sm",children:["Katso"," ",(0,r.tZ)("span",{className:"ml-2 text-xs",children:(0,r.tZ)(o.gmG,{})})]})})},b=function(){return(0,r.tZ)("div",{className:"text-gray-100 group-hover:text-white fill-current stroke-current items-center justify-center flex text-sm",children:(0,r.tZ)("div",{className:"ml-1",children:(0,r.tZ)(o.gmG,{})})})},N=function(e){var t=e.imageUrl;return(0,r.BX)("div",{className:"flex relative items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800 rounded-xl group cursor-pointer min-h-64",children:[(0,r.tZ)("div",{className:"w-full h-full",children:(0,r.tZ)("div",{className:"aspect-w-5 aspect-h-4",children:t&&(0,r.tZ)(l.Z,{duration:300,render:function(e){return(0,r.tZ)("img",{onLoad:e,alt:"Esikatselukuva",src:t,className:"w-auto rouded-xl overflow-hidden object-cover object-center"})}})})}),(0,r.tZ)("div",{className:"absolute align-middle p-10 self-center align-center justify-center flex cursor-pointer",children:(0,r.BX)(Z,{children:["Katso Finnassa",(0,r.tZ)("span",{className:"text-lg ml-4",children:(0,r.tZ)(o.CkN,{})})]})})]})},w=function(e){var t=e.topics,n=e.genres;return(0,r.BX)("div",{children:[t.length>0&&(0,r.BX)("div",{className:"mb-2",children:[(0,r.tZ)(p.d,{title:"Aiheet"}),(0,r.tZ)(m.N,{facet:"topic_facet",facets:t,facetUrl:g.lI})]}),n.length>0&&(0,r.BX)("div",{children:[(0,r.tZ)(p.d,{title:"Genret"}),(0,r.tZ)(m.N,{facet:"genre_facet",facets:n,facetUrl:g.lI})]})]})},k=function(e){var t=e.text.replace(/<br( )?\/>/g,"\n").split("\n"),n=t.length>1;return(0,r.BX)("div",{className:"mt-4 leading-snug text-md",children:[n&&(0,r.BX)("details",{children:[(0,r.tZ)("summary",{className:"cursor-pointer whitespace-pre-line outline-none",children:t[0]}),t.length>1&&(0,r.tZ)("div",{children:t.slice(1).map((function(e,t){return(0,r.tZ)("p",{className:"pt-2",children:e},"detail-".concat(t))}))})]}),!n&&(0,r.tZ)("p",{children:t[0]})]})};function O(e){var t,n=e.recordData,l=(0,c.useRouter)(),s=(0,i.useState)(null),m=s[0],p=s[1],Z=(0,i.useState)(!1),O=Z[0],j=Z[1],X=(0,i.useState)(!0),B=X[0],P=X[1],C=(0,i.useRef)(null),R=(l.query.id||"").toString(),E=(0,d.useQuery)((0,h.Yw)(R),{enabled:!!R,initialData:n,onSuccess:function(e){if(e.resultCount>0&&null!==e&&void 0!==e&&e.records){var t=(0,v.LP)(e.records[0]);t.length>0&&p(t[0].src)}}}),D=E.data,U=E.error,S=E.isFetching;(0,g.SE)(S);var I=D&&!U&&D.resultCount>0&&D.records&&D.records[0];if(U||!S&&D&&"ERROR"===D.status)return(0,r.tZ)(f.Z,{});var z=I&&I.images?"https://api.finna.fi".concat(I.images[0]):null,T=I?I.title:"",G=I&&(null===(t=I.rawData)||void 0===t?void 0:t.description),Y=I&&(0,v.rz)(I,"topic_facet")||[],K=I&&(0,v.rz)(I,"genre_facet")||[];return(0,r.BX)(r.HY,{children:[!g.sk&&(0,r.tZ)(a.PB,{noindex:!0,nofollow:!0,title:(0,g.pz)(T),description:G,openGraph:{title:(0,g.pz)(T),description:G,url:"".concat(g.Gd).concat((0,v.Yw)(R)),type:"video.movie",images:[{url:z||"",alt:"Preview"}]}}),(0,r.tZ)("div",{className:"w-auto font-sans",children:(0,r.tZ)("div",{className:"mt-3",children:(0,r.tZ)("article",{children:!S&&I&&(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:"flex flex-col w-full max-w-2xl",children:[(0,r.BX)("div",{className:"aspect-w-4 aspect-h-3 overflow-hidden",children:[m&&(0,r.tZ)(u(),{ref:C,className:"react-player -mt-2",url:m||"",width:"100%",height:"100%",playing:!0,controls:!0,muted:!0,pip:!1,playIcon:(0,r.tZ)(y,{}),light:!(!B||O||!I.images)&&"https://api.finna.fi".concat(I.images[0]||""),onStart:function(){(0,g.Z0)(l.asPath.replace("/view","/play")),j(!0)},onEnded:function(){j(!1),C.current&&C.current.showPreview()}}),!m&&(0,r.tZ)("a",{href:(0,v.Xv)((null===I||void 0===I?void 0:I.recordPage)||""),target:"_blank",rel:"noopener noreferrer",children:(0,r.tZ)(N,{imageUrl:z||null})})]}),(0,r.BX)("div",{className:"flex flex-col justify-center mt-2",children:[(0,r.tZ)(_,{record:I}),I&&(null===I||void 0===I?void 0:I.urls)&&I.urls.length>1&&(0,r.tZ)("ul",{className:"mt-5",children:(0,v.LP)(I).map((function(e){return(0,r.BX)("li",{onClick:function(){p(e.src),P(!1),C.current&&C.current.seekTo(0)},className:"flex my-2 items-center group text-md text-gray-200 hover:text-white cursor-pointer",children:[(0,r.tZ)(b,{}),(0,r.tZ)("div",{className:"ml-3",children:e.title})]},e.src)}))})]})]}),(0,r.BX)("div",{className:"max-w-2xl",children:[G&&(0,r.tZ)(k,{text:G}),(0,r.BX)("div",{className:"my-5 inline-flex flex-col sm:flex-row bg-yellow-50 text-gray-900 p-3 rounded-md",children:[I.buildings&&(0,r.BX)("div",{className:"flex flex-col",children:[(0,r.tZ)("div",{className:"mr-2 uppercase text-xs font-bold",children:"Aineiston tarjoaa: "}),(0,r.tZ)("div",{className:"flex text-sm",children:(0,r.BX)("a",{href:"https://kavi.finna.fi",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center underline hover:text-gray-700",children:[I.buildings[0].translated," ",(0,r.tZ)("span",{className:"ml-2 mr-5 text-gray-700 text-xs",children:(0,r.tZ)(o.CkN,{})})]})})]}),(0,r.tZ)("div",{className:"sm:mt-0 mt-2",children:(0,r.tZ)(x,{record:I})})]}),(0,r.tZ)(w,{topics:Y,genres:K})]})]})})})})]})}},5924:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view",function(){return n(6142)}])}},function(e){e.O(0,[617,457,774,888,179],(function(){return t=5924,e(e.s=t);var t}));var t=e.O();_N_E=t}]);