"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{1832:function(e,t,n){var a=n(8169),r=n(6359);t.Z=function(){return(0,a.BX)("div",{className:"mt-2",children:[(0,a.tZ)("h1",{children:"Kr\xf6h\xf6m.... jokin meni vikaan. "}),(0,a.BX)("p",{children:["Kokeile ladata sivu uudelleen tai"," ",(0,a.tZ)(r.Z,{href:"/",children:(0,a.tZ)("a",{className:"underline",children:"palaa etusivulle"})})]})]})}},632:function(e,t,n){n.d(t,{E:function(){return o},O:function(){return d}});var a=n(8169),r=n(6010),c=(n(9748),n(617)),i=n(6359),o=function(e){var t=e.src,n=e.width,r=void 0===n?300:n,c=e.style,i=void 0===c?{}:c;return(0,a.tZ)("img",{src:"https://api.finna.fi".concat(t,"&w=").concat(r),className:"w-auto rouded-xl overflow-hidden",alt:"Esikatselukuva",style:i})},l=function(e){var t=e.key,n=e.placeholder,c=e.children;return(0,a.tZ)("li",{className:(0,r.Z)("px-1 mt-2 w-1/2 sm:w-1/3 md:w-1/4 h-full flex flex-col group",!n&&"cursor-pointer"),children:c},t)},u=function(e){var t=e.imageUrl,n=e.title;return(0,a.BX)("div",{style:{backgroundColor:"rgb(21, 30, 50)"},children:[(0,a.tZ)("div",{className:"flex. rounded-sm aspect-w-5 aspect-h-4 h-full",children:(0,a.tZ)(c.U,{duration:300,offset:100,render:function(e){return(0,a.tZ)("div",{className:"overflow-hidden h-full",children:t&&(0,a.tZ)("img",{className:"object-none object-center h-full",src:"https://api.finna.fi".concat(t,"&w=300"),alt:"Esikatselukuva",onLoad:e})})}})}),(0,a.tZ)("div",{className:"py-2 px-3 text-center text-gray-200 truncate text-center text-xs overflow-ellipsis group-hover:text-white",children:n?(0,a.tZ)("div",{className:"self-end",children:n}):(0,a.tZ)("div",{className:"self-end",children:"\xa0"})})]})},d=function(e){var t=e.records,n=e.placeholder,r=void 0!==n&&n,c=r?Array.from(Array(8)).map((function(){return{id:"",title:"",buildings:[]}})):t;return c?(0,a.tZ)("div",{children:(0,a.tZ)("ul",{className:"flex flex-row flex-wrap overflow-hidden.",children:c.map((function(e,t){return(0,a.BX)(l,{placeholder:r,children:[!r&&(0,a.tZ)(i.Z,{href:"/view?id=".concat(encodeURIComponent(e.id)),children:(0,a.tZ)("a",{className:"flex flex-col",children:(0,a.tZ)(u,{imageUrl:(null===e||void 0===e?void 0:e.images)&&e.images[0]||void 0,title:e.title})})},"link-".concat(t)),r&&(0,a.tZ)("div",{children:(0,a.tZ)(u,{})})]},"record-".concat(t))}))})}):null}},6359:function(e,t,n){var a=n(2809),r=n(8169),c=n(1664);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){return(0,r.tZ)(c.default,o(o({},e),{},{prefetch:!1,children:e.children}))}},7074:function(e,t,n){n.d(t,{N:function(){return i}});var a=n(8169),r=n(6010),c=n(6359),i=function(e){var t=e.facet,n=e.facets,i=e.facetUrl,o=e.truncate,l=void 0!==o&&o;return(0,a.tZ)("div",{className:(0,r.Z)("mt-1 items-center w-full",l&&"line-clamp-3 overflow-clip"),children:(0,a.tZ)("ul",{children:n.map((function(e){return(0,a.tZ)(c.Z,{prefetch:!0,href:i(t,e),children:(0,a.tZ)("a",{children:(0,a.tZ)("li",{className:"inline-flex flex-auto mr-2 mb-1 px-2 py-1 bg-gradient-to-b from-gray-100 to-gray-200 rounded-md text-xs font-medium subpixel-antialiased text-gray-800 uppercase. cursor-pointer ripple-bg-white whitespace-nowrap",children:e},"facet-".concat(e))})},"facet-".concat(e))}))})})}},1604:function(e,t,n){n.d(t,{d:function(){return c}});var a=n(8169),r=n(6010),c=function(e){var t=e.title,n=e.value,c=e.resultCount;return t=e.placeholder?n="":"".concat(t,":"),(0,a.BX)("div",{className:"flex items-center justify-between h-8",children:[(0,a.BX)("h1",{className:(0,r.Z)("unstyled leading-tight",t&&"mr-2"),children:[t," ",(0,a.tZ)("span",{className:"font-normal text-gray-200",children:n})]}),c&&(0,a.tZ)("div",{children:(0,a.BX)("div",{className:"mr-2 text-sm text-gray-200 leading-tight",children:["(",c,(0,a.tZ)("span",{className:"sm:inline hidden",children:" elokuvaa"}),")"]})})]})}},3154:function(e,t,n){n.d(t,{J0:function(){return o},zp:function(){return u},Yw:function(){return p},yQ:function(){return r},rr:function(){return l},Gg:function(){return s}});var a=(n(8598).sk,"https://api.finna.fi"),r=20,c=function(e,t){return"filter[]=".concat("".concat(e,':"').concat(encodeURIComponent(t),'"'))},i=function(e){e=e||[1900,"*"];var t=["free_online_boolean:1","datasource_str_mv:kavi","~format_ext_str_mv:1/Video/Video/","~format_ext_str_mv:1/Video/Short/","-id:kavi.elonet_elokuva_1611548","-genre_facet:katsaus"];return t.push('search_daterange_mv:"['.concat(e[0]," TO ").concat(e[1],']"')),t.map((function(e){return"filter[]=".concat(encodeURIComponent(e))})).join("&")},o=function(e,t){var n=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(i(),"&").concat(n,"&limit=").concat(t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:["title","id","images"],d=i(o)+(n?'&filter[]=topic_facet:"'.concat(encodeURIComponent(n),'"'):"")+(c?'&filter[]=genre_facet:"'.concat(encodeURIComponent(c),'"'):""),s=u.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?lookfor=").concat(encodeURIComponent(e),"&").concat(d,"&").concat(s,"&limit=").concat(l,"&page=").concat(t)},u=function(){var e=[["genre_facet","mainos"],["genre_facet","animaatio"],["genre_facet","tv-tuotanto"],["genre_facet","opetuselokuva"],["genre_facet","henkil\xf6dokumentti"],["genre_facet","ammatinkuvaus"],["genre_facet","draamadokumentti"],["genre_facet","teollisuusdokumentti"],["topic_facet","henkil\xf6autot"],["topic_facet","tehtaat"],["topic_facet","matkailu"],["topic_facet","pankit"],["topic_facet","maisema"],["topic_facet","muoti"],["topic_facet","kahvi"],["topic_facet","kaupungit"],["topic_facet","virvoitusjuomat"],["topic_facet","hygienia"],["topic_facet","elintarvikkeet"],["topic_facet","ruoanvalmistus"],["topic_facet","maatalous"],["topic_facet","myym\xe4l\xe4t"],["topic_facet","rakennukset"],["search_daterange_mv","[1950 TO 1959]"],["search_daterange_mv","[1960 TO 1969]"],["search_daterange_mv","[1970 TO 1979]"],["search_daterange_mv","[1980 TO 2000]"]],t=e[Math.floor(Math.random()*e.length)],n=i()+"&"+c(t[0],t[1]),r=["title","id","images"].map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/search?").concat(n,"&").concat(r,"&limit=20&sort=first_indexed desc,id asc}")},d=function(e,t,n,r,o){var l=i(r)+(t?"&".concat(c("topic_facet",t)):"")+(n?"&".concat(c("genre_facet",n)):""),u="facet[]=".concat(e);return"".concat(a,"/api/v1/search?lookfor=").concat(o?encodeURIComponent(o):"","&").concat(l,"&").concat(u,"&limit=0")},s=function(e,t,n,a){return d("topic_facet",t,n,a,e)},f=(d("genre_facet"),d("main_date_str"),["title","id","images","urls","recordPage","imageRights","rawData","buildings"]),p=function(e){var t=f.map((function(e){return"field[]=".concat(e)})).join("&");return"".concat(a,"/api/v1/record?id=").concat(e,"&").concat(t)}},1552:function(e,t,n){n.r(t);var a=n(8169),r=n(6206),c=n(6010),i=n(1163),o=n(2962),l=n(9748),u=n(1871),d=n(8767),s=n(1832),f=n(632),p=n(7074),m=n(1604),v=n(3154),h=n(8598),g=function(e){var t=e.items,n=e.activePage,r=void 0===n?1:n,i=e.onPageSelect,o=e.small,l=void 0!==o&&o;return(0,a.tZ)("select",{"aria-label":"Siirry sivulle",onChange:function(e){return i(e.target.value)},value:r,className:(0,c.Z)("-appearance-none outline-none w-auto border bg-gray-100 border-gray-400 rounded-md text-gray-900 cursor-pointer",!l&&"mx-3 px-3 py-2 text-md",l&&"mx-1 px-1 py-1 text-xs"),children:t.map((function(e,t){var n=(r||0)===e;return(0,a.BX)("option",{disabled:n,value:e,children:["Sivu ",e]},t)}))})},y=function(e){var t=e.children,n=e.onClick,r=e.disabled,i=e.small,o=void 0!==i&&i;return(0,a.tZ)("div",{className:(0,c.Z)("flex justify-center items-center rounded-full border-gray-400",o&&"text-xl",!o&&"text-4xl",r&&" text-gray-500",!r&&"cursor-pointer active:text-pink-500 text-gray-100"),onClick:function(){r||n()},children:t})},_=function(e){var t=e.page,n=e.pageCount,r=e.setPage,c=e.small,i=void 0!==c&&c,o=Array.from(Array(n),(function(e,t){return t+1})),l=n>1,d=1===t,s=t===n;return(0,a.BX)("nav",{className:"flex items-start items-center","aria-label":"Hakutuloksen sivutus".concat(i?"":", sivun lopussa"),children:[l&&(0,a.tZ)(y,{disabled:d,"aria-disabled":d,onClick:function(){return r(t-1)},small:i,children:(0,a.tZ)(u.x_l,{})}),(0,a.tZ)(g,{activePage:t,items:o,onPageSelect:function(e){return r(e)},small:i}),l&&(0,a.tZ)(y,{disabled:s,"aria-disabled":s,onClick:function(){return r(t+1)},small:i,children:(0,a.tZ)(u.Z1Y,{})})]})},Z=function(e){var t=e.split("-");return[Number(t[0]),"*"===t[1]?t[1]:Number(t[1])]};t.default=function(e){var t,n=e.topicFacet,c=e.initialTopicFacets,u=e.genreFacet,g=e.daterange,y=e.records,x=e.initialPage,k=e.queryKey,b=e.queryValue,w=e.pageTitle,N=(0,i.useRouter)(),O=(0,r.lP)().updateScroll,C=(0,l.useState)(),j=C[0],S=C[1],P=(0,l.useState)(g?Z(g):void 0),R=P[0],B=P[1],U=(0,l.useState)(n),E=U[0],X=U[1],q=(0,l.useState)(),I=q[0],T=q[1],D=(0,l.useState)(null),A=D[0],F=D[1],G=(0,l.useState)(),K=G[0],M=G[1],Q="undefined"!==typeof N.query.page?Number(N.query.page):x||1;F(Q),(0,l.useEffect)((function(){if(N.isReady){var e=void 0;N.query.topic&&(e=String(N.query.topic)),X(e);var t=void 0;N.query.genre&&(t=String(N.query.genre)),T(t);var n,a="";if(N.query.lookfor)a=String(null===(n=N.query)||void 0===n?void 0:n.lookfor);S(a),N.query.daterange&&B(Z(String(N.query.daterange)))}}),[N]);var V=(0,d.useQuery)((0,v.rr)(j||"",Q,E,I,R),{enabled:!0,initialData:y,refetchOnMount:"undefined"===typeof y}),H=V.data,Y=V.error,z=V.isFetching,J=(0,l.useCallback)((function(e){var t="";return n?t="/search?topic=".concat(encodeURIComponent(n),"&page=").concat(e):u?t="/search?genre=".concat(encodeURIComponent(u),"&page=").concat(e):g?t="/search?date=".concat(encodeURIComponent(g),"&page=").concat(e):b&&(t="/search?".concat(k,"=").concat(encodeURIComponent(b),"&page=").concat(e)),t}),[k,b,n,u,g]);(0,h.SE)(z);var L,W=(0,d.useQuery)((0,v.Gg)(j||"",E,I,R),{enabled:h.sk||"undefined"!==typeof c||"undefined"!==typeof j&&"undefined"!==typeof A,initialData:c,refetchOnMount:"undefined"===typeof c}),$=W.data,ee=W.isFetching,te=y||H,ne=(null===te||void 0===te?void 0:te.resultCount)||K||0,ae=(L=ne,Math.ceil(Number(L)/v.yQ)),re=c||$;if((0,l.useEffect)((function(){O()}),[O]),(0,l.useEffect)((function(){M(void 0)}),[j]),(0,l.useEffect)((function(){A&&ae&&!z&&A+1>1&&A<ae-1&&N.prefetch(J(A+1))}),[N,z,J,A,ae]),(0,l.useEffect)((function(){return F(Number(N.query.page))}),[N.query.page]),!h.sk&&!N.isReady)return(0,a.tZ)(a.HY,{});var ce=function(e){window.scrollTo({top:0,behavior:"smooth"}),M(ne),N.query.page=String(e),N.push(N)},ie=n||u,oe="clips"===k,le=w||(0,h.CE)(j,n,u,g,Q),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ae>1&&(0,a.tZ)("div",{className:"",children:(0,a.tZ)(_,{page:A,pageCount:ae,setPage:function(e){return ce(e)},small:e})})},de=function(e,t,n){return(0,a.BX)("div",{className:"flex items-center justify-between",children:[(0,a.tZ)(m.d,{title:e,value:t,placeholder:n,resultCount:ne||void 0}),ue(!0)]})};return(0,a.BX)("div",{children:[(0,a.tZ)(o.PB,{title:le,noindex:0===N.asPath.indexOf("/search"),nofollow:!0,openGraph:{title:le,url:"".concat(h.Gd).concat(N.asPath)}}),(0,a.BX)("div",{className:"w-full font-sans",children:[(0,a.tZ)("div",{className:"pt-2 w-full",children:(0,a.BX)("div",{className:"flex flex-col flex-wrap md:flex-nowrap",children:[(0,a.BX)("div",{className:"h-8",children:[E&&de("Aihe",E),I&&de("Genre",I),R&&de("Aikakausi",(0,h.cm)(R[0])),oe&&de("Selaa elokuvia"),!ie&&!oe&&!g&&j&&de("Haku",j||void 0,!j)]}),(ee||((null===re||void 0===re?void 0:re.resultCount)||0)>0)&&(0,a.tZ)("div",{className:"h-16 min-h-32 w-full mt-1 mb-3",children:"OK"===(null===$||void 0===$?void 0:$.status)&&(0,a.tZ)(p.N,{facet:"topic_facet",facets:((null===re||void 0===re||null===(t=re.facets)||void 0===t?void 0:t.topic_facet)||[]).filter((function(e){return e.value!==n})).map((function(e){return e.value})),facetUrl:h.lI,truncate:!0})})]})}),(0,a.BX)("div",{className:"mt-6",children:[!z&&(Y||H&&"ERROR"===(null===H||void 0===H?void 0:H.status))&&(0,a.tZ)(s.Z,{}),!z&&H&&0===Number(ne)&&(0,a.BX)("h1",{children:["Ei tuloksia haulla ",(0,a.tZ)("span",{className:"font-normal",children:j})]}),"OK"===(null===te||void 0===te?void 0:te.status)&&(0,a.tZ)(f.O,{records:(null===te||void 0===te?void 0:te.records)||[]})]}),(0,a.tZ)("div",{className:"flex justify-center mt-6",children:!z&&ue(!1)})]})]})}}}]);